"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4295],{6601:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var t=o(4848),i=o(8453);const s={title:"oclif's Current Node Support"},r=void 0,a={permalink:"/blog/2019/10/31/oclif-node-updates",source:"@site/blog/2019-10-31-oclif-node-updates.md",title:"oclif's Current Node Support",description:"To maintain a healthy project trajectory, oclif follows and supports Node Active LTS release, currently Node 10 & Node 12. This means ensuring that oclif continues to play nice with coming Active LTS Node versions and other packages in the ecosystem. Moving forward also means leaving older versions behind. Starting in 2020, Node will stop maintaining Node 8 and it is our intent at that time to also follow suit. Let\u2019s take a look at a few ways we will be supporting these changes.",date:"2019-10-31T00:00:00.000Z",formattedDate:"October 31, 2019",tags:[],readingTime:2.4,hasTruncateMarker:!1,authors:[],frontMatter:{title:"oclif's Current Node Support"},unlisted:!1,prevItem:{title:"oclif TSLint to ESLint Migration",permalink:"/blog/2019/12/05/oclif-eslint-migration"},nextItem:{title:"oclifconf 2019: A Recap",permalink:"/blog/2019/09/16/oclifconf-recap"}},l={authorsImageUrls:[]},c=[{value:"CI Environments",id:"ci-environments",level:2},{value:".circleci/config.yml",id:"circleciconfigyml",level:3},{value:"appveyor.yml",id:"appveyoryml",level:3},{value:"Deprecating Node 8 &amp; Updating packge.json engines",id:"deprecating-node-8--updating-packgejson-engines",level:2},{value:"Packaged Node Version",id:"packaged-node-version",level:2},{value:"Supporting the future",id:"supporting-the-future",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["To maintain a healthy project trajectory, oclif follows and supports ",(0,t.jsx)(n.a,{href:"https://nodejs.org/en/about/releases/",children:"Node Active LTS release"}),", currently Node 10 & Node 12. This means ensuring that oclif continues to play nice with coming Active LTS Node versions and other packages in the ecosystem. Moving forward also means leaving older versions behind. Starting in 2020, Node will stop maintaining ",(0,t.jsx)(n.a,{href:"https://github.com/nodejs/Release#release-schedule",children:"Node 8"})," and it is our intent at that time to also follow suit. Let\u2019s take a look at a few ways we will be supporting these changes."]}),"\n",(0,t.jsx)(n.h2,{id:"ci-environments",children:"CI Environments"}),"\n",(0,t.jsx)(n.p,{children:"CLIs created with the oclif cli going forward will be generated with a CircleCI configuration with Node 10 & 12 and an Appveyor configuration using Node 10. We have also added Node latest to CircleCi to be an early warning detection against coming Node changes (Node latest is managed by CircleCI)."}),"\n",(0,t.jsx)(n.p,{children:"We have already updated every oclif repo's CI configs to reflect this."}),"\n",(0,t.jsx)(n.p,{children:"If your existing CLI uses either Appveyor or CircleCI you can update your config files also, like so:"}),"\n",(0,t.jsx)(n.h3,{id:"circleciconfigyml",children:".circleci/config.yml"}),"\n",(0,t.jsxs)(n.p,{children:["Your CircleCI config should contain a ",(0,t.jsx)(n.code,{children:"node-latest"})," job, aliased as ",(0,t.jsx)(n.code,{children:"test"}),". From this, there should be two extensions of this job for the Active LTS Node versions, Node 10 and Node 12."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"  node-10:\n    <<: *node-latest\n    docker:\n      - image: node:10\n  node-12:\n    <<: *node-latest\n    docker:\n      - image: node:12\n"})}),"\n",(0,t.jsx)(n.p,{children:"Notice that these declarations only change the Docker Node images used to run that job."}),"\n",(0,t.jsx)(n.p,{children:"Additionally, the jobs listed within workflows must also be updated to reflect our changes in configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    jobs:\n      - node-latest\n      - node-10\n      - node-12\n"})}),"\n",(0,t.jsx)(n.h3,{id:"appveyoryml",children:"appveyor.yml"}),"\n",(0,t.jsxs)(n.p,{children:["For appveyor we are currently only testing the oldest Active LTS Node version, Node 10. Update the ",(0,t.jsx)(n.code,{children:"nodejs_version"})," proppert in your appveyor.yml file to reflect this."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'environment:\n  nodejs_version: "10"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"deprecating-node-8--updating-packgejson-engines",children:"Deprecating Node 8 & Updating packge.json engines"}),"\n",(0,t.jsxs)(n.p,{children:["In Jan 2020, Node will end its Node 8 maintenance. We will follow suit by setting the package.json engine property in oclif packages to ",(0,t.jsx)(n.code,{children:">=10"})," and bumping the package's major versions."]}),"\n",(0,t.jsxs)(n.p,{children:["Depending on how you ship your CLI you may wish to also bump the engines version in your CLI's package.json. You can read more about the implications of the engines property configuration in the ",(0,t.jsx)(n.a,{href:"https://docs.npmjs.com/files/package.json#engines",children:"npm documentation"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Also consider distributing your CLI with ",(0,t.jsx)(n.a,{href:"https://oclif.io/docs/releasing#standalone-tarballs",children:"its own Node version"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"packaged-node-version",children:"Packaged Node Version"}),"\n",(0,t.jsxs)(n.p,{children:["When using dev-cli to pack your CLI it will use the Node version as specified in your package.json under the ",(0,t.jsx)(n.code,{children:"oclif.update.node.version"})," property. This value should reflect an Active LTS Node version (dev-cli does not currently enforce versions)."]}),"\n",(0,t.jsx)(n.h2,{id:"supporting-the-future",children:"Supporting the future"}),"\n",(0,t.jsxs)(n.p,{children:["As a community we may discover bumps along the way as we upgrade. If you notice something related to oclif please feel free to open an issue or submit a pull request under the relevant oclif package within ",(0,t.jsx)(n.a,{href:"https://github.com/oclif",children:"the org"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"We look forward to using the latest from Node and the community and keeping oclif healthy along the way."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>a});var t=o(6540);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);