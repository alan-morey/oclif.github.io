"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3459],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,p=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),u=s(n),d=l,h=u["".concat(p,".").concat(d)]||u[d]||m[d]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,i=new Array(o);i[0]=d;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[u]="string"==typeof e?e:l,i[1]=r;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5804:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var a=n(7462),l=n(3366),o=(n(7294),n(3905)),i=["components"],r={title:"Announcing oclif v2!"},p=void 0,s={permalink:"/blog/2022/01/12/announcing-oclif-v2",source:"@site/blog/2022-01-12-announcing-oclif-v2.md",title:"Announcing oclif v2!",description:"Hello and happy new year! It's our great pleasure to announce that we have released oclif v2, which uses the new @oclif/core library! \ud83c\udf89",date:"2022-01-12T00:00:00.000Z",formattedDate:"January 12, 2022",tags:[],readingTime:4.48,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Announcing oclif v2!"},nextItem:{title:"Introducing @oclif/core",permalink:"/blog/2021/03/01/introducing-oclif-core"}},c={authorsImageUrls:[]},u=[{value:"What\u2019s changing?",id:"whats-changing",level:2},{value:"Repository Changes",id:"repository-changes",level:3},{value:"Consolidating Tools &amp; Libraries",id:"consolidating-tools--libraries",level:3},{value:"No more single vs multi command CLIs",id:"no-more-single-vs-multi-command-clis",level:3},{value:"Node &gt; 12",id:"node--12",level:3},{value:"What\u2019s new?",id:"whats-new",level:2},{value:"New example CLI",id:"new-example-cli",level:3},{value:"Spaced commands",id:"spaced-commands",level:3},{value:"New Help Output",id:"new-help-output",level:3},{value:"Async Command Parsing",id:"async-command-parsing",level:3},{value:"What\u2019s coming next?",id:"whats-coming-next",level:2},{value:"Reference material",id:"reference-material",level:3},{value:"Migration Guide",id:"migration-guide",level:4},{value:"Compatibility Matrix",id:"compatibility-matrix",level:4}],m={toc:u},d="wrapper";function h(e){var t=e.components,n=(0,l.Z)(e,i);return(0,o.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Hello and happy new year! It's our great pleasure to announce that we have released oclif v2, which uses the new ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/core"},"@oclif/core")," library! \ud83c\udf89"),(0,o.kt)("p",null,"oclif v2 includes many changes that improve the experience of both creating and using an oclif CLI."),(0,o.kt)("p",null,"Going forward, we don't plan to make any updates to oclif v1 and its corresponding libraries, except for critical security fixes. See the ",(0,o.kt)("a",{parentName:"p",href:"#compatibility-matrix"},"compatibility matrix")," for a list of these libraries. In order to give developers time to migrate from v1 to v2, we're not completely dropping support yet. But at some point in the future we'll archive the v1 repositories and deprecate their versions on npm."),(0,o.kt)("h2",{id:"whats-changing"},"What\u2019s changing?"),(0,o.kt)("h3",{id:"repository-changes"},"Repository Changes"),(0,o.kt)("p",null,"All repositories under the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/"},"oclif org")," now use ",(0,o.kt)("inlineCode",{parentName:"p"},"main")," as their primary branch and ",(0,o.kt)("inlineCode",{parentName:"p"},"oclif-v1")," as the legacy branch. The ",(0,o.kt)("inlineCode",{parentName:"p"},"main"),"  branch corresponds to oclif v2 and the ",(0,o.kt)("inlineCode",{parentName:"p"},"oclif-v1")," branch to oclif v1. If you find any repos that don\u2019t have a ",(0,o.kt)("inlineCode",{parentName:"p"},"main")," branch, you can safely assume that they're not used in oclif v2 and will be deprecated in the future."),(0,o.kt)("h3",{id:"consolidating-tools--libraries"},"Consolidating Tools & Libraries"),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/dev-cli"},(0,o.kt)("inlineCode",{parentName:"a"},"oclif-dev"))," CLI has now been incorporated into ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/oclif"},(0,o.kt)("inlineCode",{parentName:"a"},"oclif")),". You now no longer need to install a separate package to manage your entire CLI\u2019s lifecycle."),(0,o.kt)("p",null,"The following libraries have been consolidated under ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/core"},(0,o.kt)("inlineCode",{parentName:"a"},"@oclif/core"))," and will be deprecated at some point in the future. Read the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/core/blob/main/MIGRATION.md"},"migration guide")," to learn how to update your CLI or plugin to use the new core library."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@oclif/command")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@oclif/config")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@oclif/error")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@oclif/help")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@oclif/parser"))),(0,o.kt)("h3",{id:"no-more-single-vs-multi-command-clis"},"No more single vs multi command CLIs"),(0,o.kt)("p",null,'There\'s only one "type" of oclif v2 CLI, but it can have as few or as many commands as a developer wants. As a result, there\u2019s only one command to generate CLIs, ',(0,o.kt)("inlineCode",{parentName:"p"},"oclif generate"),", as opposed to the old ",(0,o.kt)("inlineCode",{parentName:"p"},"oclif single")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"oclif multi")," commands."),(0,o.kt)("h3",{id:"node--12"},"Node > 12"),(0,o.kt)("p",null,"To ensure oclif CLIs are as secure as possible, all v2 libraries and plugins support only Node 12 or higher as of now. Going forward, they'll support only Node Maintenance or higher, as defined by Node's release schedule here: ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/en/about/releases/"},"https://nodejs.org/en/about/releases/"),"."),(0,o.kt)("h2",{id:"whats-new"},"What\u2019s new?"),(0,o.kt)("h3",{id:"new-example-cli"},"New example CLI"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/hello-world/"},(0,o.kt)("inlineCode",{parentName:"a"},"oclif-hello-world"))," is our new example repo. This is also the repo that's ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/oclif/blob/edc6616e51/src/generators/cli.ts#L74"},"used as a template")," when running ",(0,o.kt)("inlineCode",{parentName:"p"},"oclif generate")," to create a new CLI. This repo will always be able to be referenced as an example of what an oclif v2 CLI should look like."),(0,o.kt)("h3",{id:"spaced-commands"},"Spaced commands"),(0,o.kt)("p",null,"oclif CLIs can now use spaces, instead of colons, to separate topics and subcommands. To enable this feature, simply add ",(0,o.kt)("inlineCode",{parentName:"p"},'\u201ctopicSeparator": " "')," to the oclif config in your package.json. See an example in our ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/hello-world/blob/main/package.json#L55"},"example repo"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"// Old commands that use :\n$ mycli do:something\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"// New spaced commands\n$ mycli do something\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note: Spaced commands are backwards compatible. So if you enable spaced commands for your CLI, users will still be able to use ",(0,o.kt)("inlineCode",{parentName:"p"},":")," as a separator. This ensures that any existing scripts don't break.")),(0,o.kt)("h3",{id:"new-help-output"},"New Help Output"),(0,o.kt)("p",null,"We\u2019ve revamped the way command help is outputted to the terminal, making it both easier to implement and easier to read. See the difference between the old help output on the left and the new help output on the right in the screenshots below."),(0,o.kt)("table",{border:"0"},(0,o.kt)("tr",null,(0,o.kt)("td",null,"oclif v1"),(0,o.kt)("td",null,"oclif v2")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("img",{src:"/img/2022-01-12-announcing-oclif-v2/sfdx-help.png"})),(0,o.kt)("td",null,(0,o.kt)("img",{src:"/img/2022-01-12-announcing-oclif-v2/sf-help.png"})))),(0,o.kt)("p",null,"Notice that there are new sections for flags and global flags, examples are displayed with better spacing, and there is a section at the bottom called Configuration Variables. This Configuration Variables section is not part of the new help by default. But we've added support for custom help sections, which is what the ",(0,o.kt)("inlineCode",{parentName:"p"},"sf")," CLI uses to create the new section. "),(0,o.kt)("h3",{id:"async-command-parsing"},"Async Command Parsing"),(0,o.kt)("p",null,"We\u2019ve also improved the performance of new CLIs by rewriting how commands are parsed on initialization. The ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/core/blob/main/src/parser/parse.ts"},"new parser")," is asynchronous, which makes CLIs with a lot of commands or installed  plugins much faster."),(0,o.kt)("h2",{id:"whats-coming-next"},"What\u2019s coming next?"),(0,o.kt)("p",null,"Part of our charter for the release of oclif v2 includes improving our engagement with the oclif community. We know that over the past couple of years we\u2019ve reduced our involvement, and a lot of issues and PRs have languished in limbo. Hopefully you\u2019ve already seen increased activity and responses from oclif maintainers recently, but if you haven\u2019t, please don\u2019t hesitate to ping us by tagging ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/orgs/oclif/teams/admins"},"@admins")," in oclif repos."),(0,o.kt)("p",null,"We also want to start interviewing members of the oclif community to acquire feedback and prioritize the features and fixes you deem most important!"),(0,o.kt)("p",null,"Best,"),(0,o.kt)("p",null,"The oclif team"),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"reference-material"},"Reference material"),(0,o.kt)("h4",{id:"migration-guide"},"Migration Guide"),(0,o.kt)("p",null,"This guide explains how to upgrade a CLI or plugin from the old oclif v1 libraries to the new ",(0,o.kt)("inlineCode",{parentName:"p"},"@oclif/core")," library that oclif v2 uses."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/oclif/core/blob/main/MIGRATION.md"},"https://github.com/oclif/core/blob/main/MIGRATION.md")),(0,o.kt)("h4",{id:"compatibility-matrix"},"Compatibility Matrix"),(0,o.kt)("p",null,"The following matrix shows how the v1 libraries and plugins relate to the new v2 ones. Use this matrix as a guide to know what to drop and which versions to switch when upgrading your plugins and CLIs to v2."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null},'oclif "v1"'),(0,o.kt)("th",{parentName:"tr",align:null},'oclif "v2"'))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Utility CLIs"),(0,o.kt)("td",{parentName:"tr",align:null},"oclif@<2",(0,o.kt)("br",null),"@oclif/dev-cli@<2"),(0,o.kt)("td",{parentName:"tr",align:null},"oclif@>=2")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Main packages"),(0,o.kt)("td",{parentName:"tr",align:null},"@oclif/command",(0,o.kt)("br",null),"@oclif/config",(0,o.kt)("br",null),"@oclif/errors",(0,o.kt)("br",null),"@oclif/parser",(0,o.kt)("br",null),"@oclif/plugin-help",(0,o.kt)("br",null)),(0,o.kt)("td",{parentName:"tr",align:null},"@oclif/core@>=1")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Node LTS"),(0,o.kt)("td",{parentName:"tr",align:null},"Node v8-14"),(0,o.kt)("td",{parentName:"tr",align:null},"Node v12+ (at time of writing)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"TypeScript"),(0,o.kt)("td",{parentName:"tr",align:null},"typescript@<4"),(0,o.kt)("td",{parentName:"tr",align:null},"typescript@>=4")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Main plugins"),(0,o.kt)("td",{parentName:"tr",align:null},"@oclif/plugin-autocomplete@<1",(0,o.kt)("br",null),"@oclif/plugin-commands@<2",(0,o.kt)("br",null),"@oclif/plugin-help@<4",(0,o.kt)("br",null),"@oclif/plugin-not-found@<2",(0,o.kt)("br",null),"@oclif/plugin-plugins@<2",(0,o.kt)("br",null),"@oclif/plugin-update@<2",(0,o.kt)("br",null),"plugin-warn-if-update-available@<2",(0,o.kt)("br",null),"plugin-which@<2",(0,o.kt)("br",null)),(0,o.kt)("td",{parentName:"tr",align:null},"@oclif/plugin-autocomplete@>=1",(0,o.kt)("br",null),"@oclif/plugin-commands@>=2",(0,o.kt)("br",null),"@oclif/plugin-help@>=4",(0,o.kt)("br",null),"@oclif/plugin-not-found@>=2",(0,o.kt)("br",null),"@oclif/plugin-plugins@>=2",(0,o.kt)("br",null),"@oclif/plugin-update@>=2",(0,o.kt)("br",null),"@oclif/plugin-warn-if-update-available@>=2",(0,o.kt)("br",null),"@oclif/plugin-which@>=2",(0,o.kt)("br",null))))))}h.isMDXComponent=!0}}]);